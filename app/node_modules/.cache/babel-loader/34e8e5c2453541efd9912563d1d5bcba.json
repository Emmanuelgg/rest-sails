{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/app/components/Sales.js\";\nimport React, { Component } from \"react\";\nimport DataTable from 'react-data-table-component';\nimport DatePicker from 'react-date-picker/dist/entry.nostyle';\nimport 'react-date-picker/dist/DatePicker.css';\nimport 'react-calendar/dist/Calendar.css';\nimport ENV from \"../config.js\";\n\nvar Sales =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Sales, _Component);\n\n  function Sales(props) {\n    var _this;\n\n    _classCallCheck(this, Sales);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Sales).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onChange\", function (date) {\n      return _this.setState({\n        date: date\n      });\n    });\n\n    _this.state = {\n      foodOrderCompleted: [],\n      totalSale: 0.00,\n      columns: [{\n        name: 'Numero',\n        selector: 'id_food_order',\n        sortable: true\n      }, {\n        name: 'Numero/Mesa',\n        selector: 'dining_table_number',\n        sortable: true\n      }, {\n        name: 'Nombre/Mesa',\n        selector: 'dining_table_name',\n        sortable: true\n      }, {\n        name: 'Total',\n        selector: 'total',\n        sortable: true\n      }, {\n        name: 'Fecha',\n        selector: 'created_at',\n        sortable: true\n      }, {\n        name: 'Acciones',\n        selector: 'actions',\n        ignoreRowClick: true,\n        cell: function cell(row) {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 47\n            },\n            __self: this\n          }, React.createElement(\"button\", {\n            className: \"btn btn-primary py-1 px-2 btn-action\",\n            onClick: _this.getFoodOrderDescription.bind(_assertThisInitialized(_this), row.actions),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 48\n            },\n            __self: this\n          }, React.createElement(\"span\", {\n            className: \"icon icon-minus\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 49\n            },\n            __self: this\n          })));\n        }\n      }],\n      date: new Date()\n    };\n    _this.getFoodOrderCompleted = _this.getFoodOrderCompleted.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Sales, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getFoodOrderCompleted();\n    }\n  }, {\n    key: \"getFoodOrderDescription\",\n    value: function getFoodOrderDescription() {}\n  }, {\n    key: \"getFoodOrderCompleted\",\n    value: function getFoodOrderCompleted() {\n      var _this2 = this;\n\n      this.setState({\n        totalSale: 0.00\n      });\n      var totalSale = 0.00;\n      fetch(\"\".concat(ENV.API_ROUTE, \"get\"), {\n        method: \"post\",\n        cors: \"cors\",\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: _JSON$stringify({\n          table: \"food_orders fo\",\n          columns: \"\\n                    fo.id_food_order id_food_order,\\n                    fo.total total,\\n                    dt.name dining_table_name,\\n                    dt.number dining_table_number,\\n                    created_at\",\n          join: \"\\n                    INNER JOIN dining_tables dt ON dt.id_dining_table = fo.id_dining_table\\n                    \",\n          where: \"fo.status = 2\"\n        })\n      }).then(function (response) {\n        return response.json();\n      }).then(function (res) {\n        if (res.status != 200) return \"Error\";\n        var foodOrderDescriptionList = res.data.map(function (item) {\n          totalSale += item.total;\n          return {\n            id_food_order: item.id_food_order,\n            dining_table_name: item.dining_table_name,\n            dining_table_number: item.dining_table_number,\n            total: item.total,\n            created_at: item.created_at,\n            actions: item.id_food_order\n          };\n        });\n\n        _this2.setState({\n          foodOrderCompleted: res.data\n        });\n\n        _this2.setState({\n          totalSale: totalSale\n        });\n\n        console.log(_this2.foodOrderCompleted);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-12 text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(DatePicker, {\n        onChange: this.onChange,\n        value: this.state.date,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"title-total-sales\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"Total de ventas: $\", this.state.totalSale)), React.createElement(\"div\", {\n        className: \"col-4 text-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        className: \"ml-2  btn btn-primary\",\n        onClick: this.openDay,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, \"Abrir d\\xEDa\"), React.createElement(\"button\", {\n        type: \"button\",\n        className: \"ml-2  btn btn-primary\",\n        onClick: this.closeDay,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, \"Cerrar d\\xEDa\"))), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(DataTable, {\n        noHeader: true,\n        pagination: true,\n        columns: this.state.columns,\n        data: this.state.foodOrderCompleted,\n        className: \"table\",\n        noDataComponent: \"No se encontraron ventas\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return Sales;\n}(Component);\n\nexport default Sales;","map":{"version":3,"sources":["/app/components/Sales.js"],"names":["React","Component","DataTable","DatePicker","ENV","Sales","props","date","setState","state","foodOrderCompleted","totalSale","columns","name","selector","sortable","ignoreRowClick","cell","row","getFoodOrderDescription","bind","actions","Date","getFoodOrderCompleted","fetch","API_ROUTE","method","cors","headers","body","table","join","where","then","response","json","res","status","foodOrderDescriptionList","data","map","item","total","id_food_order","dining_table_name","dining_table_number","created_at","console","log","onChange","openDay","closeDay"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\"\nimport DataTable from 'react-data-table-component';\nimport DatePicker from 'react-date-picker/dist/entry.nostyle';\nimport 'react-date-picker/dist/DatePicker.css';\nimport 'react-calendar/dist/Calendar.css';\n\nimport ENV from \"../config.js\"\n\nclass Sales extends Component {\n    constructor(props){\n        super(props)\n        this.state = {\n            foodOrderCompleted: [],\n            totalSale: 0.00,\n            columns: [\n              {\n                name: 'Numero',\n                selector: 'id_food_order',\n                sortable: true\n              },\n              {\n                name: 'Numero/Mesa',\n                selector: 'dining_table_number',\n                sortable: true,\n              },\n              {\n                name: 'Nombre/Mesa',\n                selector: 'dining_table_name',\n                sortable: true,\n              },\n              {\n                name: 'Total',\n                selector: 'total',\n                sortable: true,\n              },\n              {\n                name: 'Fecha',\n                selector: 'created_at',\n                sortable: true,\n              },\n              {\n                name: 'Acciones',\n                selector: 'actions',\n                ignoreRowClick: true,\n                cell: row => {\n                    return(\n                        <div>\n                            <button className=\"btn btn-primary py-1 px-2 btn-action\" onClick={this.getFoodOrderDescription.bind(this,row.actions)}>\n                                <span className=\"icon icon-minus\"></span>\n                            </button>\n                        </div>\n                    )\n                }\n\n              },\n          ],\n          date: new Date(),\n        }\n\n        this.getFoodOrderCompleted = this.getFoodOrderCompleted.bind(this)\n    }\n\n    componentDidMount() {\n        this.getFoodOrderCompleted()\n    }\n\n    getFoodOrderDescription() {\n\n    }\n\n    onChange = date => this.setState({ date })\n\n    getFoodOrderCompleted() {\n        this.setState({totalSale: 0.00})\n        let totalSale = 0.00\n        fetch(`${ENV.API_ROUTE}get`, {\n            method: \"post\",\n            cors: \"cors\",\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                table: \"food_orders fo\",\n                columns:`\n                    fo.id_food_order id_food_order,\n                    fo.total total,\n                    dt.name dining_table_name,\n                    dt.number dining_table_number,\n                    created_at`,\n                join: `\n                    INNER JOIN dining_tables dt ON dt.id_dining_table = fo.id_dining_table\n                    `,\n                where: \"fo.status = 2\"\n            })\n        })\n        .then(response => {return response.json()})\n        .then(res => {\n            if (res.status != 200)\n                return \"Error\"\n                let foodOrderDescriptionList = res.data.map(item => {\n                    totalSale += item.total\n                    return({\n                        id_food_order: item.id_food_order,\n                        dining_table_name: item.dining_table_name,\n                        dining_table_number: item.dining_table_number,\n                        total: item.total,\n                        created_at: item.created_at,\n                        actions: item.id_food_order\n                    })\n                })\n                this.setState({foodOrderCompleted: res.data})\n                this.setState({totalSale: totalSale})\n                console.log(this.foodOrderCompleted);\n\n        })\n    }\n\n    render() {\n        return (\n            <div className=\"container\">\n                <div className=\"row\">\n                    <div className=\"col-12 text-center\">\n                        <DatePicker\n                          onChange={this.onChange}\n                          value={this.state.date}\n                        />\n                    </div>\n                </div>\n                <div className=\"row\">\n                    <div className=\"col-8\">\n                        <h1 className=\"title-total-sales\">Total de ventas: ${this.state.totalSale}</h1>\n                    </div>\n                    <div className=\"col-4 text-right\">\n                        <button type=\"button\" className=\"ml-2  btn btn-primary\" onClick={this.openDay}>Abrir día</button>\n                        <button type=\"button\" className=\"ml-2  btn btn-primary\" onClick={this.closeDay}>Cerrar día</button>\n                    </div>\n                </div>\n                <div className=\"row\">\n                    <div className=\"col-12\">\n                        <DataTable\n                            noHeader={true}\n                            pagination={true}\n                            columns={this.state.columns}\n                            data={this.state.foodOrderCompleted}\n                            className=\"table\"\n                            noDataComponent=\"No se encontraron ventas\"\n                        />\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Sales\n"]},"metadata":{},"sourceType":"module"}